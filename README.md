Technical Handover: Minecraft Surface Scanner System

This document outlines the architecture, installation, and operation of the Surface Scanner system, bridging Minecraft world data to Godot and Web-based visualizers.

1. System Components

The delivery package consists of three main layers:

Minecraft Plugin (SurfaceScanner-1.0.jar): A Java-based Paper/Spigot plugin that hooks into the server to extract real-time coordinate and block data.

Bridge Layer (scanner.py): A Python utility that monitors the Minecraft output, processes the raw data into optimized JSON schemas, and handles "thin pixel" scanning logic.

Engine Loaders:

Godot (GodotSurfaceLoader.gd): A GDScript that reconstructs the scanned surface as 3D geometry.

Web (visualizer.html): A lightweight preview tool for quick data verification.

2. Setup Instructions

A. Minecraft Server

Navigate to your TestServer/plugins folder.

Ensure SurfaceScanner-1.0.jar is present.

Start the server using start.bat.

Note: The plugin is currently configured for Minecraft 1.21.1 (as seen in the debug logs).

B. Python Bridge

Open a terminal in the SurfaceScannerProject directory.

Ensure dependencies are installed: pip install -r requirements.txt.

Run the monitor: python scanner.py.

This script will generate surface_data.json every time a new scan event is detected in the game.

C. Godot Integration

Import the Godot_Project folder into Godot Engine.

The GodotSurfaceLoader.gd is attached to a Node3D.

In the Inspector, set the Data File Path to point to the surface_data.json generated by the Python bridge.

Run the scene to see the surface reconstructed in 3D space.

3. Data Schema (surface_data.json)

The scan data is exported in the following format for "any game engine" compatibility:

pos: {x, y, z} coordinates.

color: {r, g, b} and hex values for materials.

thickness: Defined by the ThinPixelScanner class.

angle: Normal vectors used for culling logic in the engine.

4. Troubleshooting

File Busy Errors: If you see [RETRY] File busy or malformed, the Python script is attempting to read the JSON while the Minecraft plugin is still writing. The script includes a 1-second poll retry to handle this automatically.

Performance: For large scans, ensure the precision depth in scanner.py is adjusted (defaulted to 0.0001 for high-fidelity scans).

